proxy-providers:
  Provider-1:
    interval: 600
    url: http://sub.store/download/Provider-1?target=Stash
  Provider-2:
    interval: 600
    url: http://sub.store/download/Provider-2?target=Stash
  Provider-3:
    interval: 600
    url: http://sub.store/download/Provider-3?target=Stash
  Provider-4:
    interval: 600
    url: http://sub.store/download/Provider-4?target=Stash

mode: rule # 使用规则模式

dns:
  enable: true
  default-nameserver:
    - 223.5.5.5       # 阿里 DNS
    - 119.29.29.29    # 腾讯 DNS
  nameserver:
    - https://dns.alidns.com/dns-query # 阿里 DoH
    - https://doh.pub/dns-query        # 腾讯 DoH
    - https://223.5.5.5/dns-query      # 阿里备用
  fallback:
    - 8.8.8.8         # Google 公共 DNS
    - 1.1.1.1         # Cloudflare 公共 DNS
  strategy: prefer_ipv4

proxies:
  - name: 直连
    type: DIRECT
    udp: true

proxy-groups:
  - name: 默认节点
    icon: https://fastly.jsdelivr.net/gh/Koolson/Qure/IconSet/Color/Proxy.png
    type: select
    proxies:
      - 自动选择
      - 直连
      - HK 香港
      - TW 台湾
      - JP 日本
      - KR 韩国
      - US 美国
      - SG 新加坡
      - 其它地区
      - 全部节点

  # 分组：国内流量专用
  - name: 国内网站
    icon: https://fastly.jsdelivr.net/gh/Koolson/Qure/IconSet/Color/StreamingCN.png
    type: select
    proxies:
      - 直连
      - 默认节点
      - HK 香港
      - TW 台湾

  # 分组：未分类的外网走代理
  - name: 其他外网
    icon: https://fastly.jsdelivr.net/gh/Koolson/Qure/IconSet/Color/Streaming!CN.png
    type: select
    proxies:
      - 默认节点
      - HK 香港
      - TW 台湾
      - JP 日本
      - KR 韩国
      - US 美国
      - SG 新加坡
      - 直连

  # 地区分组（示例）
  - name: HK 香港
    icon: https://fastly.jsdelivr.net/gh/Koolson/Qure/IconSet/Color/Hong_Kong.png
    type: url-test
    include-all: true
    interval: 120
    tolerance: 50
    lazy: true
    filter: "(?i)(港|🇭🇰|hk|hong)"
  - name: TW 台湾
    icon: https://fastly.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Taiwan.png
    type: url-test
    include-all: true
    interval: 120
    tolerance: 50
    lazy: true
    filter: "(?i)(台|🇹🇼|tw|taiwan)"
  - name: JP 日本
    icon: https://fastly.jsdelivr.net/gh/Koolson/Qure/IconSet/Color/Japan.png
    type: url-test
    include-all: true
    interval: 120
    tolerance: 50
    lazy: true
    filter: "(?i)(日|🇯🇵|jp|japan)"
  - name: KR 韩国
    icon: https://fastly.jsdelivr.net/gh/Koolson/Qure/IconSet/Color/Korea.png
    type: url-test
    include-all: true
    interval: 120
    tolerance: 50
    lazy: true
    filter: "(?i)(韩|🇰🇷|kr|korea)"
  - name: US 美国
    icon: https://fastly.jsdelivr.net/gh/Koolson/Qure/IconSet/Color/United_States.png
    type: url-test
    include-all: true
    interval: 120
    tolerance: 50
    lazy: true
    filter: "(?i)(美|🇺🇲|us|states|america)"

rules:
  # 阻止 QUIC 协议
  - SCRIPT,quic,REJECT

  # 分类服务规则
  - RULE-SET,category-ai-chat-!cn,默认节点
  - RULE-SET,telegram,默认节点
  - RULE-SET,biliintl,默认节点
  - RULE-SET,youtube,默认节点
  - RULE-SET,netflix,默认节点
  - RULE-SET,spotify,默认节点
  - RULE-SET,disney,默认节点
  - RULE-SET,tiktok,默认节点

  # 按地理位置优先匹配
  - GEOIP,LAN,直连,no-resolve        # 局域网地址直连
  - GEOIP,CN,国内网站,no-resolve    # 中国 IP 地址直连

  # 最后兜底规则
  - MATCH,其他外网                  # 未匹配到规则时使用代理

rule-providers:
  category-ai-chat-!cn:
    type: http
    interval: 86400
    behavior: domain
    format: text
    url: https://fastly.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@meta/geo/geosite/category-ai-chat-!cn.list
  telegram:
    type: http
    interval: 86400
    behavior: domain
    format: text
    url: https://fastly.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@meta/geo/geosite/telegram.list
  biliintl:
    type: http
    interval: 86400
    behavior: domain
    format: text
    url: https://fastly.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@meta/geo/geosite/biliintl.list
  youtube:
    type: http
    interval: 86400
    behavior: domain
    format: text
    url: https://fastly.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@meta/geo/geosite/youtube.list
  netflix:
    type: http
    interval: 86400
    behavior: domain
    format: text
    url: https://fastly.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@meta/geo/geosite/netflix.list
  spotify:
    type: http
    interval: 86400
    behavior: domain
    format: text
    url: https://fastly.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@meta/geo/geosite/spotify.list
